# Spring Boot Production Configuration for Railway

# Application Configuration
spring.application.name=E-Commerce
server.port=${PORT:8080}
server.address=0.0.0.0

# Database Configuration (Railway PostgreSQL)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://shuttle.proxy.rlwy.net:38014/railway}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:VnaiMgSgcJHPuQhkzSPmXwOSVxDfNixK}
spring.datasource.driver-class-name=org.postgresql.Driver

# Database Connection Pool (HikariCP) - Railway Optimized
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=2
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.initialization-fail-timeout=1

# JPA Configuration for Production
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.defer-datasource-initialization=false
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.hbm2ddl.create_namespaces=true
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.cache.use_second_level_cache=false
spring.jpa.properties.hibernate.cache.use_query_cache=false

# Startup Configuration - Prevent Hanging
spring.main.lazy-initialization=false
spring.main.banner-mode=off

# Logging Configuration - Railway Optimized
logging.level.root=WARN
logging.level.com.example.E_Commerce=INFO
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
logging.level.org.springframework.boot.autoconfigure=WARN
logging.level.org.springframework.boot.autoconfigure.jdbc=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.postgresql=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Actuator Configuration (for monitoring)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.info.enabled=true
management.endpoints.web.base-path=/actuator
management.health.db.enabled=true
management.health.defaults.enabled=true

# Cashfree Payment Gateway Configuration
cashfree.app.id=${CASHFREE_APP_ID:TEST108283821957fe1153788f32479528382801}
cashfree.secret.key=${CASHFREE_SECRET_KEY:cfsk_ma_test_dddc2fa7d13c09a0a5f0c9c88f26f678_f1e97d01}
cashfree.environment=${CASHFREE_ENVIRONMENT:SANDBOX}
cashfree.return.url=${CASHFREE_RETURN_URL:https://ecommerce-production-bc4d.up.railway.app/payment/success}
cashfree.notify.url=${CASHFREE_NOTIFY_URL:https://ecommerce-production-bc4d.up.railway.app/payment/webhook}

# Admin Configuration
admin.username=${ADMIN_USERNAME:admin}
admin.password=${ADMIN_PASSWORD:admin123}